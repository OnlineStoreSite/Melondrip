<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Checkout | Melondrip</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <!-- HEADER -->
  <header class="header-main">
    <div class="header-inner">
      <a href="index.html" class="logo"><img src="logo.png" alt="Melondrip logo"/></a>
    </div>
  </header>
  <div class="subheader"><p>CHECKOUT</p></div>

  <main>
    <div class="checkout-container">
      <!-- ORDER SUMMARY -->
      <section class="order-summary">
        <h2>Order Summary</h2>
        <table class="summary-table">
          <thead>
            <tr><th>Product</th><th>Qty</th><th>Unit Price</th><th>Total</th></tr>
          </thead>
          <tbody id="checkout-items"></tbody>
        </table>
        <div class="summary-total">
          <span>Subtotal:</span><span id="sub-total">$0.00</span>
        </div>
      </section>

      <!-- SHIPPING & BILLING FORM -->
      <section class="checkout-form">
        <h2>Shipping & Billing Details</h2>
        <form id="checkout-form">
          <div class="form-row">
            <label for="full-name">Full Name</label>
            <input type="text" id="full-name" required/>
          </div>
          <div class="form-row">
            <label for="email">Email Address</label>
            <input type="email" id="email" required/>
          </div>
          <div class="form-row">
            <label for="address">Shipping Address</label>
            <input type="text" id="address" required/>
          </div>
          <div class="form-row flex-two">
            <div><label for="city">City</label><input type="text" id="city" required/></div>
            <div><label for="postal">Postal Code</label><input type="text" id="postal" required/></div>
          </div>
          <div class="form-row">
            <label for="country">Country</label>
            <input type="text" id="country" required/>
          </div>

          <!-- PAYMENT -->
          <h2>Payment Method</h2>
          <div class="form-row">
            <label><input type="radio" name="pay" checked/> Credit Card</label>
            <label><input type="radio" name="pay"/> PayPal</label>
          </div>
          <div class="form-row">
            <label for="card-number">Card Number</label>
            <input type="text" id="card-number" placeholder="•••• •••• •••• ••••"/>
          </div>
          <div class="form-row flex-two">
            <div><label for="expiry">Expiry Date</label><input type="text" id="expiry" placeholder="MM/YY"/></div>
            <div><label for="cvc">CVC</label><input type="text" id="cvc" placeholder="•••"/></div>
          </div>

          <button type="submit" class="btn place-order">Place Order</button>
        </form>
      </section>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="footer-header"><p>More Information</p></div>
    <div class="footer-links">
      <a href="#">Contact</a>
      <a href="#">Returns &amp; Exchanges</a>
      <a href="#">Terms &amp; Conditions</a>
      <a href="#">Shipping &amp; Delivery</a>
      <a href="#">Privacy Policy</a>
    </div>
  </footer>

  <script>
    // Populate Order Summary
    const CART_KEY = 'melondrip_cart';
    const cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]');
    const tbody = document.getElementById('checkout-items');
    let subtotal = 0;

    if (cart.length) {
      cart.forEach(item => {
        const tr = document.createElement('tr');
        const line = (item.price * item.quantity).toFixed(2);
        subtotal += parseFloat(line);
        tr.innerHTML = `
          <td>${item.name}</td>
          <td>${item.quantity}</td>
          <td>$${item.price.toFixed(2)}</td>
          <td>$${line}</td>
        `;
        tbody.appendChild(tr);
      });
    } else {
      const tr = document.createElement('tr');
      tr.innerHTML = '<td colspan="4">Your cart is empty.</td>';
      tbody.appendChild(tr);
    }

    document.getElementById('sub-total').textContent = `$${subtotal.toFixed(2)}`;

    // Place Order Handler
    document.getElementById('checkout-form').addEventListener('submit', e => {
      e.preventDefault();
      alert('Thank you — your order has been placed!');
      localStorage.removeItem(CART_KEY);
      window.location.href = 'index.html';
    });
  </script>
</body>
</html>
